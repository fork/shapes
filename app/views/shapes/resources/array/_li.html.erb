<% new_path = select_resource_path(:id => resource.base.shape_id, :parent_path => resource.path) %>
<% id = "#{path_to_css_selector(resource.path)}Ul" %>
<%= link_to 'New resource', new_path, { :onclick => "Shapes.renderUrlInElement(this, '#{ new_path }'); return false;" } %>
<% if !@noscript &&  !resource.children.blank? %>
<%= link_to 'Fold/Unfold', '#', { :onclick => "Shapes.toggleArrayContent('#{ id }', '#{ resource.base.shape_id }', '#{ resource.path }')" } %>
<% end %>
<ul class="shapes<%= resource.class.name.demodulize %> shapesSortableList" id="<%= id %>" path="<%= resource.path %>" >
<% if @noscript %>
<%= render :partial => '/shapes/resources/show', :collection => resource.children, :as => :resource %>
<% end %>
</ul>
